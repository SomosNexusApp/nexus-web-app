<section class="ofertas-page">
  
  <!-- Hero compacto -->
  <div class="page-hero">
    <div class="container">
      <h1 class="hero-title">
        <span class="spark-icon">⚡</span>
        Ofertas Flash
      </h1>
      <p class="hero-subtitle">Los mejores chollos de la red en tiempo real</p>
    </div>
  </div>

  <div class="container main-layout">
    
    <!-- Sidebar Filtros -->
    <aside class="filter-sidebar">
      <div class="filter-card glass-panel">
        <h3 class="filter-title">Filtros</h3>
        
        <!-- Búsqueda -->
        <div class="filter-group">
          <label>Buscar</label>
          <input 
            type="text" 
            [(ngModel)]="filtro.busqueda" 
            placeholder="Buscar ofertas..."
            (keyup.enter)="aplicarFiltros()"
            class="filter-input"
          />
        </div>

        <!-- Categoría -->
        <div class="filter-group">
          <label>Categoría</label>
          <select [(ngModel)]="filtro.categoria" (change)="aplicarFiltros()" class="filter-select">
            <option [value]="undefined">Todas</option>
            <option *ngFor="let cat of categorias" [value]="cat">{{ cat }}</option>
          </select>
        </div>

        <!-- Precio -->
        <div class="filter-group">
          <label>Precio</label>
          <div class="price-inputs">
            <input 
              type="number" 
              [(ngModel)]="filtro.precioMinimo" 
              placeholder="Min"
              class="filter-input-small"
            />
            <span>—</span>
            <input 
              type="number" 
              [(ngModel)]="filtro.precioMaximo" 
              placeholder="Max"
              class="filter-input-small"
            />
          </div>
        </div>

        <!-- Tienda -->
        <div class="filter-group">
          <label>Tienda</label>
          <input 
            type="text" 
            [(ngModel)]="filtro.tienda" 
            placeholder="Amazon, MediaMarkt..."
            class="filter-input"
          />
        </div>

        <!-- Botones -->
        <div class="filter-actions">
          <button (click)="aplicarFiltros()" class="btn-primary">
            Aplicar Filtros
          </button>
          <button (click)="limpiarFiltros()" class="btn-ghost-small">
            Limpiar
          </button>
        </div>
      </div>
    </aside>

    <!-- Grid de ofertas -->
    <div class="content-area">
      
      <!-- Ordenamiento -->
      <div class="toolbar">
        <span class="result-count">{{ ofertas.length }} ofertas encontradas</span>
        <div class="sort-buttons">
          <button 
            *ngFor="let orden of ordenamiento"
            (click)="cambiarOrden(orden.value)"
            [class.active]="filtro.ordenarPor === orden.value"
            class="sort-btn">
            {{ orden.label }}
          </button>
        </div>
      </div>

      <!-- Grid -->
      <div class="ofertas-grid" *ngIf="!isLoading; else loadingTpl">
        <app-product-card 
          *ngFor="let oferta of ofertas" 
          [product]="oferta">
        </app-product-card>
      </div>

      <!-- Loading -->
      <ng-template #loadingTpl>
        <div class="loading-state">
          <div class="spinner"></div>
          <p>Cargando ofertas...</p>
        </div>
      </ng-template>

      <!-- Empty -->
      <div *ngIf="!isLoading && ofertas.length === 0" class="empty-state">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
        <p>No se encontraron ofertas con estos filtros</p>
      </div>

    </div>

  </div>
</section>