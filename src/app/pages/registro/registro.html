<div class="registro-container">
  <div class="registro-card">
    
    <!-- Paso 1: Datos -->
    <div *ngIf="paso === 'datos'" class="step-content">
      <h1 class="registro-title">Únete a Nexus</h1>
      <p class="registro-subtitle">Crea tu cuenta y empieza a ahorrar</p>

      <form (ngSubmit)="registrar()" class="registro-form">
        
        <div class="form-row">
          <div class="form-group">
            <label for="user">Usuario *</label>
            <input 
              type="text" 
              id="user" 
              [(ngModel)]="usuario.user" 
              name="user"
              placeholder="tu_usuario"
              required
            />
          </div>

          <div class="form-group">
            <label for="email">Email *</label>
            <input 
              type="email" 
              id="email" 
              [(ngModel)]="usuario.email" 
              name="email"
              placeholder="tu@email.com"
              required
            />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="password">Contraseña *</label>
            <input 
              type="password" 
              id="password" 
              [(ngModel)]="usuario.password" 
              name="password"
              placeholder="Mínimo 6 caracteres"
              required
            />
          </div>

          <div class="form-group">
            <label for="confirmPassword">Confirmar *</label>
            <input 
              type="password" 
              id="confirmPassword" 
              [(ngModel)]="usuario.confirmPassword" 
              name="confirmPassword"
              placeholder="Repite tu contraseña"
              required
            />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="telefono">Teléfono</label>
            <input 
              type="tel" 
              id="telefono" 
              [(ngModel)]="usuario.telefono" 
              name="telefono"
              placeholder="600123456"
            />
          </div>

          <div class="form-group">
            <label for="ubicacion">Ubicación</label>
            <input 
              type="text" 
              id="ubicacion" 
              [(ngModel)]="usuario.ubicacion" 
              name="ubicacion"
              placeholder="Madrid, España"
            />
          </div>
        </div>

        <div *ngIf="errorMessage" class="error-message">
          {{ errorMessage }}
        </div>

        <button type="submit" class="btn-registro" [disabled]="isLoading">
          {{ isLoading ? 'Creando cuenta...' : 'Crear Cuenta' }}
        </button>
      </form>

      <p class="login-link">
        ¿Ya tienes cuenta? <a routerLink="/login">Inicia sesión</a>
      </p>
    </div>

    <!-- Paso 2: Verificación -->
    <div *ngIf="paso === 'verificacion'" class="step-content">
      <h1 class="registro-title">Verifica tu cuenta</h1>
      <p class="registro-subtitle">
        Hemos enviado un código de 6 dígitos a<br>
        <strong>{{ usuario.email }}</strong>
      </p>

      <form (ngSubmit)="verificar()" class="verificacion-form">
        <div class="form-group">
          <label for="codigo">Código de verificación</label>
          <input 
            type="text" 
            id="codigo" 
            [(ngModel)]="codigoVerificacion" 
            name="codigo"
            placeholder="123456"
            maxlength="6"
            class="code-input"
            required
          />
        </div>

        <div *ngIf="errorMessage" class="error-message">
          {{ errorMessage }}
        </div>

        <button type="submit" class="btn-registro" [disabled]="isLoading">
          {{ isLoading ? 'Verificando...' : 'Verificar Cuenta' }}
        </button>
      </form>

      <p class="resend-link">
        ¿No recibiste el código? <a href="#">Reenviar</a>
      </p>
    </div>

  </div>
</div>